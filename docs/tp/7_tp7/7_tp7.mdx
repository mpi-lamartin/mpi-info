---
hide_table_of_contents: true
hide_title: false
cor: true
title: "TP 7 : Résolution du taquin avec A*"
---

import useBaseUrl from '@docusaurus/useBaseUrl';
import ThemedImage from '@theme/ThemedImage';

Le jeu de taquin est constitué d'une grille $n \times n$ dans laquelle
sont disposés les entiers de $0$ à $n^{2} - 2$, une case étant laissée libre.
Voici un état initial possible pour $n = 4$ (qui est la version classique) :

<ThemedImage
  alt="Taquin"
  sources={{
    light: useBaseUrl('/img/taquin_1.png'),
    dark: useBaseUrl('/img/taquin_1.png'),
  }}
  width={"30%"}
/>

On obtient un nouvel état du jeu en déplaçant dans la case libre le
contenu de la case située au-dessus, à gauche, en dessous ou à droite, au
choix. Si on déplace par exemple le contenu de la case située à droite de
la case libre, c'est-à-dire 12, on obtient le nouvel état suivant :

<ThemedImage
  alt="Taquin"
  sources={{
    light: useBaseUrl('/img/taquin_2.png'),
    dark: useBaseUrl('/img/taquin_2.png'),
  }}
  width={"30%"}
/>

Le but du jeu de taquin est de parvenir à l'état final suivant :

<ThemedImage
  alt="Taquin"
  sources={{
    light: useBaseUrl('/img/taquin_3.png'),
    dark: useBaseUrl('/img/taquin_3.png'),
  }}
  width={"30%"}
/>

Dans ce sujet, on s'intéresse à la résolution optimale du jeu du taquin,
c'est-à-dire à déterminer une suite de déplacements légaux de longueur
minimale permettant de passer d'une configuration initiale donnée à
la configuration finale.
Dans l'exemple ci-dessus, la solution optimale est de longueur 50
(à partir de l'état initial, ou 49 à partir du deuxième état
représenté).

En OCaml, une position sera représentée par le type suivant :
\begin{ocaml}
type state = {
  grid : int array array;
  mutable i : int;
  mutable j : int;
  mutable h : int;
}
\end{ocaml}

- On suppose qu'une constante globale $n$ a été définie.
- `i` et `j` indique les coordonnées de la case libre.
- `grid` est une matrice $n \times n$ codant la grille.
        La case libre contiendra toujours la valeur $n^{2} - 1$
        (qui n'apparaît pas dans une autre case).
- `h` sera une heuristique estimant la distance de l'état
        actuel à l'état final, que nous définirons plus loin.

## Graphe du taquin

Une configuration du taquin se code naturellement comme une
permutation de $[0, ..., 15]$ (où le 15 correspond à la case vide).
On peut alors définir le graphe (non orienté) $G$ du taquin comme suit :
\begin{itemize}
  \item chaque sommet $s$ de $G$ est une grille ;
  \item il y a une arête entre $s$ et $s'$ si et seulement si
        on peut passer de $s$ à $s'$ en une étape
        par l'un des quatre déplacements décrits plus haut.
\end{itemize}
